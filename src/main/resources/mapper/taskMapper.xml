<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 일감 처리 SQL -->
<mapper namespace="com.bluemine.www.interfaces.TaskMapper">
	<!-- group 가져오기 -->
	<select id="selectGroup" parameterType="int" resultType="group">
		select
			gp_Num
			, prj_Num
			, gp_Name
		from
			PJ_GROUP
		where
			prj_Num = #{prjNum}
	</select>
	
	<!-- Task 가져오기 -->
	<select id="printTask" parameterType="int" resultType="gpWork">
		select
			gs_Num
			, gs_Name
			, gp_Num
			, gs_Content
			, start_Date
			, deadLine
			, gp_Pri
			, progress
			, taskCategory
		from
			GP_WORK
		where
			gp_Num = #{gp_Num}
	</select>

	<!-- Task 저장 -->
	<insert id="insertTask" parameterType="gpWork">
		insert into GP_WORK (
			gs_Num
			, gs_Name
			, gp_Num	
			, gs_Content
			, start_Date
			, deadLine
			, gp_Pri
			, taskCategory
		)
		values (
			GS_SEQ.nextval
			, #{gs_Name}
			, #{gp_Num}	
			, #{gs_Content}
			, #{start_Date}
			, #{deadLine}
			, #{gp_Pri}
			, #{taskCategory}
		)
	</insert>
	
	<!-- progress 변경 -->
	<insert id="updateProgress" parameterType="gpWork">
		update 
			GP_WORK 
		set 	
			progress = #{progress}
		where
			gp_Num = #{gp_Num}	
	</insert>
</mapper>